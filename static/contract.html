<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>
        Contract Info
    </title>
</head>

<body>
    <div class="container py-5 h-100">
        <div class="card">
            <div class="card-body">
                <h1 id="contract_id"></h1>
                <form method="post">
                    <div class="mb-3">
                        <label for="dao_name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="dao_name" name="dao_name">
                    </div>
                    <div class="mb-3">
                        <label for="dao_description" class="form-label">Description</label>
                        <textarea type="text" class="form-control" id="dao_description" name="dao_description" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="members_uri" class="form-label">Members URI</label>
                        <input type="text" class="form-control" id="members_uri" name="members_uri">
                    </div>
                    <div class="mb-3">
                        <label for="proposals_uri" class="form-label">Proposals URI</label>
                        <input type="text" class="form-control" id="proposals_uri" name="proposals_uri">
                    </div>
                    <div class="mb-3">
                        <label for="activity_log_uri" class="form-label">Activity Log URI</label>
                        <input type="text" class="form-control" id="activity_log_uri" name="activity_log_uri">
                    </div>
                    <div class="mb-3">
                        <label for="governance_uri" class="form-label">Governance URI</label>
                        <input type="text" class="form-control" id="governance_uri" name="governance_uri">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</body>


<script>
    document.getElementById("contract_id").innerHTML = window.location.href.split('/').pop();
    let api_path = window.location.pathname.slice(6);
    fetch(api_path)
        .then(resp => resp.json())
        .then(data => {
            console.log(data);
            document.getElementById("governance_uri").value = data.governanceURI;
            document.getElementById("members_uri").value = data.membersURI;
            document.getElementById("proposals_uri").value = data.proposalsURI;
        });
</script>
</html>